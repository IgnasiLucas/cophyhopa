---
title: "Untitled"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{bash}
IPYRAD=/opt/miniconda3/envs/ipyrad/bin/ipyrad

$IPYRAD 

## create demux Assembly object for Runs 1 and 2

ipyrad -n run1
ipyrad -n run2

## edit the params for Run1 ## detallar molt b√© 
sed -i '/\[2] /c\ipsimdata/rad_example_R1_.fastq.gz  ## [2] ' params-run1.txt
sed -i '/\[3] /c\ipsimdata/rad_example_barcodes.txt  ## [3] ' params-run2.txt

## edit the params for Run2
sed -i '/\[2] /c\ipsimdata/rad_example_R1_.fastq.gz  ## [2] ' params-run1.txt
sed -i '/\[3] /c\ipsimdata/rad_example_barcodes.txt  ## [3] ' params-run2.txt

# demultiplex Run1 (Step 1)
ipyrad -p params-run1.txt -s 1

#show results 
#ipyrad -p params-run1.txt -r

# demultiplex Run2 (Step 2)
ipyrad -p params-run2.txt -s 1

# merge de two runs 
ipyrad -m both params-run1.txt params-run2.txt

```


# Step 2 - Filtering 
```{bash}

ipyrad -p params-both.txt -s 2

ls both_edits/

ipyrad -p params-both.txt -r

```

# Step 3 - Clustering within samples
```{bash}

ipyrad -p params-both.txt -s 3

ipyrad -p params-both.txt -r

```

# Step 4 - Joint estimation of heterozygosity and error rate
```{bash}

ipyrad -p params-both.txt -s 4

ipyrad -p params-both.txt -r

```

# Step 5 - Consensus base calls
```{bash}

ipyrad -p params-both.txt -s 5

ipyrad -p params-both.txt -r

```

# Step 6: Cluster across samples
```{bash}

ipyrad -p params-both.txt -s 6

ipyrad -p params-both.txt -r

```

# Step 7: Filter and write output files
```{bash}

ipyrad -p params-both.txt -s 6

ipyrad -p params-both.txt -r

```

# FINAL STATS FILE 
```{bash}
less ZUR/both_outfiles/both_stats.txt

less ZUR/both_outfiles/both.loci

```
