---
title: "Create ipyrad params files"
author: "J. Ignacio Lucas LledÃ³"
date: "25/10/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{bash barcodes, engine.opts='-i'}
eval "$(command conda 'shell.bash' 'hook' 2> /dev/null)"
conda activate ipyrad
PARPATH="/gata/joiglu/cophyhopa/data/PARASIT_HiSeq_data_WINDU"
BARCODEDIR="/gata/mar/cophyhopa/data/parasites/ddRADseq/demultiplex"

for dir in 311 313; do
   if [ ! -d parasite$dir ]; then mkdir parasite$dir; fi
   cd parasite$dir
   if [ ! -d fastq ]; then mkdir fastq; fi
   for i in 1 2; do
      for n in $(seq 1 16); do
         if [ ! -e params-PAR${i}no${n}.txt ]; then
            ipyrad -n PAR${i}no${n}
            RAWFASTQPATH="${PARPATH}$dir/PAR${i}no${n}*"
            BARCODESPATH="$BARCODEDIR/barcod_PAR${i}_no${n}.txt"
            sed -i "/## \[2\]/c $RAWFASTQPATH  ## [2] [raw_fastq_path]" params-PAR${i}no${n}.txt
            sed -i "/## \[3\]/c $BARCODESPATH  ## [3] [barcodes_path]"  params-PAR${i}no${n}.txt
            sed -i "/## \[4\]/c $(pwd)/fastq   ## [4] [sorted_fastq_p]" params-PAR${i}no${n}.txt
            sed -i "/## \[7\]/c ddrad          ## [7] [datatype]"       params-PAR${i}no${n}.txt
            sed -i "/## \[8\]/c CATG, TAA      ## [8] [restriction_ov]" params-PAR${i}no${n}.txt
         fi
      done
   done
   cd ..
done
```